<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <style>
            @page {
                margin-top: 1cm;
                margin-bottom: 0cm;
                margin-left: 2cm;
                margin-right: 2cm;
            }
            html {
                font-family: ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
                color: rgb(30 41 59);
            }
            body {
                margin: 0;
                width: 100%;
                height: 100%;
            }
            td, tr, th {
                font-size: 8px;
                border: 1px solid #B6B6B6;
                border-collapse: collapse;
                text-align: left;
                vertical-align: middle;
                padding: 4px;
            }
            p {
                font-size: 8px;
                margin: 0;
            }
            .table {
                width: 100%;
                border: 1px solid #B6B6B6;
                border-collapse: collapse;
                table-layout: fixed;
                margin: 0px;
            }
            .borderless-table {
                width: 100%;
                border-collapse: collapse;
                table-layout: fixed;
            }
            .table.container {
                width: 100%;
                border: 1px solid #B6B6B6;
                padding: 0;
            }
            .inner-table {
                width: 100%;
                border: none;
                border-collapse: collapse;
                table-layout: fixed;
                padding: 0px;
            }
            .no-border {
                border-style: none;
                border-collapse: collapse;
            }
            .fill {
                background-color: #B6B6B6;
            }
            .softer-fill {
                background-color: #E0E0E0;
            }
            .full {
                width: 100%;
                border: 1px solid rgb(30 41 59);
            }
            .center {
                width: 50%;
                border: 1px solid rgb(30 41 59);
            }
            .side {
                width: 25%;
                border: 1px solid rgb(30 41 59);
            }
            .border-b {
                border-style: none none solid none;
            }
            .no-border {
                border: none;
            }
            .text-center {
                text-align: center;
            }
            .text-left {
                text-align: left;
            }
            .text-right {
                text-align: right;
            }
            .text-title {
                font-size: 16px;
            }
            .text-status {
                font-size: 16px;
            }
            .font-normal {
                font-weight: normal;
            }
            .font-semibold {
                font-weight: 600;
            }
            .font-bold {
                font-weight: bold;
            }
            .container {
                display: grid;
                row-gap: 4px;
                padding-top: 1px;
                padding-bottom: 1px;
            }
            .container.container-1 {
                grid-template-columns: 100%;
            }
            .container.container-2 {
                grid-template-columns: 50% 50%;
            }
            .container.container-3 {
                grid-template-columns: 33.333333% 33.333333% 33.333333%;
            }
            .flex-row {
                display: flex;
                flex-direction: row;
            }
            .w-1\/2 {
                width: 50%;
            }
            .w-1\/3 {
                width: 33.333333%;
            }
            .w-2\/3 {
                width: 66.666666%;
            }
            .w-full {
                width: 100%;
            }
            .h-10 {
                height: 10px;
            }
            .h-16 {
                height: 16px;
            }
            .h-20 {
                height: 20px;
            }
            .h-26 {
                height: 26px;
            }
            .h-30 {
                height: 30px;
            }
            .h-40 {
                height: 40px;
            }
            .h-50 {
                height: 50px;
            }
            .h-60 {
                height: 60px;
            }
            .h-70 {
                height: 70px;
            }
            .h-80 {
                height: 80px;
            }
            .footer {
                position: absolute;
                width: 100%;
                height: 2.5cm;
                bottom: 1cm;
            }
            .page-break {
                page-break-after: always;
            }
            .mt-4 {
                margin-top: 4px;
            }
            .mt-8 {
                margin-top: 12px;
            }
            .pr-4 {
                padding-right: 4px;
            }
            .pl-4 {
                padding-left: 4px;
            }
            .py-2 {
                padding-top: 4px;
                padding-bottom: 4px;
            }
            .textbox {
                padding-left: 4px;
                padding-right: 4px;
            }
            .bar {
                width: 100%;
                height: 10px;
                background-color: #E9B226;
            }
            .middle-bar {
                width: 100%;
                height: 10px;
                background-color: #08107B;
            }
            .end-bar {
                width: 100%;
                height: 10px;
                background-color: #B6B6B6;
            }
            .title-bar {
                width: 100%;
                height: 100px;
                padding-right: 4px;
                padding-bottom: 4px;
                display: flex;
                font-size: 24px;
                align-items: flex-end;
                justify-content: flex-end;
            }
            .logo-bar {
                width: 100%;
                height: 40px;
                display: flex;
                justify-content: center;
                align-items: center;
            }
            .img-container {
                display: flex;
                justify-content: center;
                align-items: center; 
                width: 20%;
                height: 100%;
            }
            .fit-image {
                object-fit: contain;
            }
            .negative-t-1 {
                margin-top: -1px;
            }
        </style>
</head>
<body>
    <div class="title-bar fill font-bold">COTIZACIÓN N°{{ quote.public_id }}</div>

    <table class="table mt-8">
        <tr>
            <td class="h-16 fill" colspan="1"></td>
            <th class="text-left font-bold" colspan="9">Institución</th>
            <td class="text-left" colspan="20">{{ quote.client.name }}</td>
            <td class="fill" colspan="1"></td>
            <th class="text-left font-bold" colspan="9">Fecha</th>
            <td class="text-left" colspan="20">{{ quote.date }}</td>
        </tr>
        <tr>
            <td class="h-16 fill" colspan="1"></td>
            <th class="text-left font-bold" colspan="9"> Rep. Ventas</th>
            <td class="text-left" colspan="20">{{ quote.salesRep.first_name }} {{ quote.salesRep.last_name }}</td>
            <td class="fill" colspan="1"></td>
            <th class="text-left font-bold" colspan="9"></th>
            <td class="text-left" colspan="20"></td>
        </tr>
        <tr>
            <td class="h-16 fill" colspan="1"></td>
            <th class="text-left font-bold" colspan="9">Región</th>
            <td class="text-left" colspan="20">{{ quote.client.region }}</td>
            <td class="fill" colspan="1"></td>
            <th class="text-left font-bold" colspan="9"></th>
            <td class="text-left" colspan="20"></td>
        </tr>
    </table>

    <div class="bar mt-4"></div>

    <table class="borderless-table mt-4">
        <tr class="no-border">
            <td class="fill no-border" colspan="1"></td>
            <th class="text-left softer-fill no-border" colspan="59">Propuesta Técnica/Económica</th>
        </tr>
    </table>

    <p class="mt-8">A continuación detallamos a usted los productos que componen esta propuesta:</p>

    <table class="table mt-4">
        <tr>
            <td class="fill" colspan="1"></td>
            <th class="softer-fill text-center" colspan="9">Producto</th>
            <th class="softer-fill text-center" colspan="24">Descripción</th>
            <th class="softer-fill text-center" colspan="6">Cantidad</th>
            <th class="softer-fill text-center" colspan="10">Precio Neto Unitario</th>
            <th class="softer-fill text-center" colspan="10">Precio Neto Total</th>
        </tr>
        {% for product in products %}
        <tr>
            <td class="fill" colspan="1"></td>
            <th class="text-center py-2" colspan="9">{{ product.product.code }}</th>
            <td class="text-left py-2" colspan="24">{{ product.product.description }}</td>
            <td class="text-center" colspan="6">{{ product.quantity }}</td>
            <td class="text-center" colspan="10" rowspan="{{ products|length }}">
                <div class="flex-row w-full">
                    <p class="w-1/2 pr-4 pl-4 text-left">USD</p>
                    <p class="w-1/2 pr-4 pl-4 text-right">{{ quote.total }}</p>
                </div>
            </td>
            <td class="text-center" colspan="10" rowspan="{{ products|length }}">
                <div class="flex-row w-full">
                    <p class="w-1/2 pr-4 pl-4 text-left">USD</p>
                    <p class="w-1/2 pr-4 pl-4 text-right">{{ quote.total }}</p>
                </div>
            </td>
        </tr>
        {% endfor %}
    </table>

    <table class="borderless-table negative-t-1">
        <tr class="no-border">
            <td class="no-border" colspan="1"></td>
            <th class="no-border" colspan="9"></th>
            <th class="no-border" colspan="24"></th>
            <th class="no-border" colspan="6"></th>
            <th class="text-center py-2" colspan="10">TOTAL NETO</th>
            <th colspan="10">
                <div class="flex-row w-full">
                    <p class="w-1/2 pr-4 pl-4 text-left">USD</p>
                    <p class="w-1/2 pr-4 pl-4 text-right">{{ quote.total }}</p>
                </div>
            </th>
        </tr>
        <tr class="no-border">
            <td class="no-border" colspan="1"></td>
            <th class="no-border" colspan="9"></th>
            <th class="no-border" colspan="24"></th>
            <th class="no-border" colspan="6"></th>
            <th class="text-center py-2" colspan="10">IVA</th>
            <th class="text-center" colspan="10">
                <div class="flex-row w-full">
                    <p class="w-1/2 pr-4 pl-4 text-left">USD</p>
                    <p class="w-1/2 pr-4 pl-4 text-right">{{ iva }}</p>
                </div>
            </th>
        </tr>
        <tr class="no-border">
            <td class="no-border" colspan="1"></td>
            <th class="no-border" colspan="9"></th>
            <th class="no-border" colspan="24"></th>
            <th class="no-border" colspan="6"></th>
            <th class="text-center py-2" colspan="10">TOTAL CON IVA</th>
            <th class="text-center" colspan="10">
                <div class="flex-row w-full">
                    <p class="w-1/2 pr-4 pl-4 text-left">USD</p>
                    <p class="w-1/2 pr-4 pl-4 text-right">{{ final }}</p>
                </div>
            </th>
        </tr>
    </table>

    <div class="middle-bar mt-4"></div>

    <table class="table mt-4">
        <tr class="no-border">
            <td class="fill" colspan="1" rowspan="18"></td>
            <th class="softer-fill text-left" colspan="59">Condiciones Comerciales</th>
        </tr>
        <tr class="no-border">
            <th class="h-26 text-left no-border" colspan="14">Plazo de entrega</th>
            <td class="text-left no-border" colspan="15">60 días desde la aceptación de la OC</td>
            <th class="text-left no-border" colspan="14">Validez de la oferta</th>
            <td class="text-left no-border" colspan="16">30 días</td>
        </tr>
        <tr class="no-border">
            <th class="h-26 text-left no-border" colspan="14">Garantía</th>
            <td class="text-left no-border" colspan="15">12 meses por defectos de fábrica</td>
            <th class="text-left no-border" colspan="14">Mantenciones preventivas durante la garantía</th>
            <td class="text-left no-border" colspan="16">2 al año</td>
        </tr>
        <tr class="no-border">
            <th class="h-26 text-left no-border" colspan="14">Forma de pago</th>
            <td class="text-left no-border" colspan="45">30 días</td>
        </tr>
        <tr class="no-border">
            <th class="text-left no-border" colspan="59">Observaciones:</th>
        </tr>
        <tr class="no-border">
            <td class="text-left no-border" colspan="59">
                La oferta sólo contempla los productos y servicios expresamente detallados en ella. Servicios adicionales estarán sujetos a nueva valorización.
            </td>
        </tr>
        <tr class="no-border">
            <td class="text-left no-border" colspan="59">
                Es responsabilidad de la institución revisar las condiciones mínimas para el correcto funcionamiento del equipamiento y/o insumo ofertado.
            </td>
        </tr>
        <tr class="no-border">
            <th class="text-left no-border" colspan="59">
                Cotización expresada en dólares. La conversión a pesos se realiza según dólar observado del día de su facturación.
            </th>
        </tr>
        <tr class="h-10 no-border"><td class="no-border" colspan="59"></td></tr>
        <tr class="h-30 no-border">
            <th class="text-left no-border" colspan="59">Datos para Orden de compra:</th>
        </tr>
        <tr class="no-border">
            <td class="text-left no-border" colspan="29">Razón social: Olympus Corporation Chile</td>
            <td class="text-left no-border" colspan="30">Dirección: Avda. Presidente Eduardo Frei Montalva 6001, Of. 65</td>
        </tr>
        <tr class="no-border">
            <td class="text-left no-border" colspan="29">RUT: 99.576.080-0</td>
            <td class="text-left no-border" colspan="30">Teléfono: 22674 03 00</td>
        </tr>
        <tr class="no-border">
            <td class="text-left no-border" colspan="29">Giro: Venta de equipos e insumos médicos</td>
            <td class="text-left no-border" colspan="30">Email: info@olympus.com</td>
        </tr>
    </table>

    <div class="end-bar mt-4"></div>
    <div class="logo-bar mt-4">
        <div class="img-container">
            <img src="{{ logo }}" alt="Olympus Logo" class="fit-image">
        </div>
    </div>
</body>
</html>
